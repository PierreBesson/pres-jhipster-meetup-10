<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Microservices in practice with JHipster, from dev 💻 to prod 🚀</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">
		<link rel="stylesheet" href="css/star.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<link rel="stylesheet" href="css/material-icons.css">

		<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet" type="text/css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background="#3E8ACC" data-transition="none" data-background-transition="none">
					<div style="font-family:Pacifico;font-size:120%;">Microservices in practice with JHipster</div>
					<div style="font-family:Pacifico;font-size:100%;">From <span style="color:orange">dev 💻</span> to <span style="color:red">prod 🚀</span></div>
					<img src="img/wallpaper.png" style="border:none;box-shadow:none;width:80%"/>
					<hr class="star-light" style="line-height:1">
					<div style="font-family:Pacifico;font-size:80%;">Pierre Besson</div>
					<div style="font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;font-size:60%;">Paris JHipster Meetup #10, October 4th, 2017</div>
					<img src="img/ippon.png" width="20%" style="border:none;box-shadow:none;background-color:#3e8acc;"/>
				</section>
				<section>
					<section>
						<h3>Who am I ?</h3>
						<hr class="star-primary">
						<div style="float:left;width:50%;">
							<img src="img/photo.jpeg" width="260" style="box-shadow:none;border:none"/>
							<h3>Pierre Besson</h3>
							<p><a href="http://twitter.com/pibesson"><i class="fa fa-twitter"></i>
	@pibesson</a></p>
							<p><a href="mailto:pbesson@ippon.fr">pbesson@ippon.fr</a></p>
						</div>
						<br>
						<br>
						<div style="float:right;width:50%;font-size:80%">
							<ul>
								<li>Java developer @IpponTech</li>
								<li>JHipster core team member</li>
								<li>Favorite technologies:
									<ul style="list-style-type: none">
										<li style="text-decoration: line-through #ff0000;">☕ JAVA EE</li>
										<li>🍃 Spring</li>
										<li>🐳 Docker</li>
										<li>☸️ Kubernetes</li>
									</ul>
								</li>
						</div>
					</section>
					<section>
						<img src="img/ippon.png" alt="" style="border:none;box-shadow:none" width="25%">
						<ul>
							<li>300 collaborators worldwide (France, USA, Australia)</li>
							<li>4 cities in France : Paris, Nantes, Lyon, Bordeaux</li>
							<li>Specialized in Java, Cloud, Big Data</li>
						</ul>
						<img src="img/ippon-rooftop.jpg" alt="" width="44%">
						<img src="img/ippon-devoxx.jpg" alt="" width="51%">
					</section>
					<section>
						<h3>The JHipster team</h3>
						<a href="https://jhipster.github.io/team/">https://jhipster.github.io/team/</a>
						<img src="img/jhipster-team.jpg" alt="" width="70%">
					</section>
				</section>
			</section>
			<section>
				<h2>JHipster</h2>
				<hr class="star-primary">
				<h2>from</h2>
				<h2 style="color:lightskyblue"> monolith <i class="fa fa-cube"></i></h2>
				<h2>to</h2>
				<h2 style="color:orangered">microservices <i class="fa fa-cubes"></i></h2>
			</section>
			<section>
					<section>
						<h2>Introducting Microservices</h2>
						<div style="font-size: 200%;color:greenyellow"><i class="fa fa-cloud"></i></div>
						<h4 style="font-size:70%">Why microservices?</h4>
						<h4 style="font-size:70%">Microservices patterns</h4>
						<h4 style="font-size:70%">Beware microservice hype</h4>
					</section>
					<section>
						<h3>Why microservices</h3>
						<br>
						<hr class="star-primary">
					</section>
					<section>
						<h3>Microservices patterns</h3>
						<img src="img/PatternsRelatedToMicroservices.jpg" width="85%">
							<a style="font-size: 50%" href="http://microservices.io/patterns/microservices.html">microservices.io/patterns/microservices.html</a>
						</section>
						<section>
						<h3>Beware microservice hype</h3>
						</section>		
			</section>
			<section>
					<section>
						<h2>JHipster as a microservice platform</h2>
						<div style="font-size: 200%;color: gold"><i class="fa fa-fort-awesome"></i></div>
						<h4 style="font-size:70%">JHipster goals</h4>
						<h4 style="font-size:70%">Extending JHipster for microservices</h4>
						<h4 style="font-size:70%">Monolith vs Microservices</h4>
						<h4 style="font-size:70%">Technologies used<h4>
						<h4 style="font-size:70%">The JHipster Microservice Stack</h4>
					</section>
					<section>
						<h3>JHipster goals</h3>
						<div style="font-size: 200%;color:lightskyblue"><i class="fa fa-cube"></i></div>
						<br>
						<hr class="star-primary">
						<ul style="font-size: 90%;list-style-type: none;">
							<li class="fragment">🏗️ Provide <strong>scaffolding</strong> for a full stack application</li>
							<li class="fragment">💠 Based on <strong>modern technologies</strong></li>
							<li class="fragment">🔧 Maximize development <strong>productivity</strong> with tooling</li>
							<li class="fragment">📈 <strong>Production ready</strong> (maintainable, secure, scalable)</li>
							<!--<li><strong>DevOps ready</strong>: provide configuration for docker, CI...</li>-->
						</ul>
					</section>
					<section>
						<h3>Extending JHipster for a microservice architecture</h3>
						<div style="font-size: 200%;color:orangered"><i class="fa fa-cubes"></i></div>
						<hr class="star-primary">
						<ul style="font-size: 80%;list-style-type: none;">
							<li class="fragment">🏗️ Generate several <strong>independent</strong> microservices and front-ends</li>
							<li class="fragment"><i class="fa fa-terminal"></i>️ ️Work out of the box in dev and in prod !</li>
							<li class="fragment"><i class="fa fa-cloud"></i> Configure service discovery and centralized configuration</li>
							<li class="fragment">🔒Provide a distributed <strong>security</strong> solution</li>
							<li class="fragment"><i class="fa fa-rocket"></i> Be <strong>DevOps ready</strong>: provide configuration for docker, CI-CD, ...</li>
							<li class="fragment"><i class="fa fa-desktop"></i> Provide <strong>management dashboards</strong></li><!-- service listing, api documentation -->
							<li class="fragment"><i class="fa fa-tachometer"></i> Offer a <strong>Monitoring</strong> solution to manage production</li>
						</ul>
					</section>
					<section>
						<h3>Monolith vs Microservices</h3>
						<hr class="star-primary">
						<p>
						<ul style="list-style-type:none">
						<li class="fragment"><div><i class="fa fa-cube"></i> Monolith:</div>
							<ul style="float:right">
								<li>One application (Back-end + Front-end)</li>
							</ul>
						</li>
						<li class="fragment"><div><i class="fa fa-cubes"></i> Microservice architecture:</div>
							<ul style="float:right">
								<li class="fragment">Registry</li>
								<li class="fragment">API Gateway (proxy + front-end)</li>
								<li class="fragment">Microservices (back-end only)</li>
								<li class="fragment">(Optional) OAuth2 server: UAA, Keycloak</li>
							</ul>
						</li>
						</ul>
						</p>
					</section>
					<section>
						<h3>Technologies used by JHipster Microservice</h3>
						<hr class="star-primary">
						<div style="font-size: 80%">Rely on Spring Boot and Spring Cloud abstractions:<!-- to implement microservice patterns:--></div>
							<ul style="font-size: 80%;list-style-type: none;">
								<li class="fragment"><i class="fa fa-cloud"></i> Service discovery: Eureka/Consul</li>
								<li class="fragment"><i class="fa fa-sliders"></i> Centralized configuration: Spring Cloud Config</li>
								<li class="fragment">⛩️ API Gateway: Zuul</li>
								<li class="fragment">🔀 Client side load balancing: Ribbon</li>
								<li class="fragment">⚡ Circuit Breaker: Hystrix</li>
							</ul>
							<!--<div>Fill in the gaps from an Hello World demo to a production ready microservice</div>-->
					</section>
					<section>
						<h3>The JHipster Microservice Stack</h3>
						<hr class="star-primary">
						<div style="font-size:80%">Added value added over Spring Cloud integrations :</div>
						<br>
							<ul style="font-size: 70%;list-style-type:none">
								<li class="fragment"><i class="fa fa-cloud"></i> <strong>JHipster Registry</strong>: Eureka + Config server + Management</li>
								<li class="fragment">⛩️ <strong>JHipster Gateway</strong>: API management with Zuul and swagger docs</li>
								<li class="fragment">🔁 <strong>CI-CD Configuration</strong>: Pipelines for Jenkins 🤵, Travis 👷</li>
								<li class="fragment">🚀 <strong>Deployments</strong>: Docker 🐋, Kubernetes ☸️, Rancher 🐄</li>
								<li class="fragment"><i class="fa fa-tachometer"></i> <strong>JHipster Console</strong>: logs + metrics + traces (based on ELK and Zipkin)</li>
							</ul>
					</section>
					<section>
						<h4>JHipster Microservice Architecture</h4>
						<img src="img/microservices_architecture_2.png" alt="" style="border:none;box-shadow:none">
						<a href="http://www.jhipster.tech/microservices-architecture/" style="font-size:60%">jhipster.tech/microservices-architecture/</a>
					</section>
				</section>
				<section>
					<h2>Show time</h2>
					<span style="color:red;font-size:300%">🎆</span>
					<h4 style="font-size:70%">Using JHipster to develop microservices</h4>
					<h4 style="font-size:70%">Running the full architecure with docker</h4>
				</section>
				<section>
					<h2>Let's go to production </h2>
					<span style="color:red;font-size:300%">🚀</span>	
					<h4 style="font-size:70%">Deploying microservices on Kubernetes</h4>
				</section>
				<section>
					<section>
						<h2>Introduction to microservice monitoring</h2>
						<span style="color:red;font-size:300%"><i class="fa fa-tachometer"></i></span>
						<h4 style="font-size:70%">Problems and solution</h4>
						<h4 style="font-size:70%">The 3 ways of observability</h4>
						<h4 style="font-size:70%">The JHipster Console</h4>
					</section>
					<section>
						<h3>The problems</h3>
						<hr class="star-primary">
						<div style="font-size:80%">
							<ul>
								<li class="fragment"><i class="fa fa-chain-broken"></i> Distributed system -> More points of failure</li>
								<li class="fragment"><i class="fa fa-files-o"></i> Logs are dispersed in many many log files</li>
								<li class="fragment"><i class="fa fa-search"></i> Hard to locate the microservice that caused a problem</li>
								<li class="fragment"><i class="fa fa-link"></i> Hard to follow the chain of requests</li><!--As the interractions in the system grows,  -->
								<li class="fragment">🐇/🐢 Studying latency is hard</li>
								<li class="fragment">💂 Resiliency mechanism are hard to configure properly</li><!-- they can even obstruct you from troubleshoting your system -->
							</ul>
						</div>
					</section>
					<section>
						<h3>The solution</h3>
						<h4>Comprehensive monitoring</h4>
						<hr class="star-primary">
						<div style="font-size:80%">
						<div class="text-center">
									<ul style="list-style-type:none">
										<li class="fragment"><i class="fa fa-file-text-o"></i> Logs  : discrete event</li>
										<li class="fragment"><i class="fa fa-line-chart"></i>Metrics : numerical values (business or technical)</li><!--  collected by code instrumentation(ex: timer, gauge, counter)-->
										<li class="fragment"><i class="fa fa-link"></i> Traces : chains of calls in the system (spans)</li><!--follow chain calls with by collecting requests informations with a correlation ID -> tracing -->
									</ul>
							</ul>
						</div>
						<br>
							<div>
							<ul style="list-style-type:none">
								<li class="fragment"><i class="fa fa-database"></i> Store everything in one place, with proper metadata</li>
								<li class="fragment"><i class="fa fa-search"></i> Use a search engine to query and aggregate monitoring data</li>
								<li class="fragment"><i class="fa fa-area-chart"></i> <i class="fa fa-bar-chart"></i> <i class="fa fa-pie-chart"></i> Visualize using graphs, build dashboards</li></li>
								<li class="fragment"><i class="fa fa-compass"></i> Navigate around<!--, switch from global view to more specialized view--></li>
								<li class="fragment"><i class="fa fa-exclamation-triangle"></i> Create alerts</li>
							</div>
						</div>
					</section>
					<section data-transition="none">
						<h3>The 3 ways of observability</h3>
						<hr class="star-primary">
							<img src="img/3ways.png" style="border:none;box-shadow:none;">
							<div><a style="font-size:50%" href="https://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html">https://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html</a></div>
					</section>
					<section data-transition="none">
						<h3>The 3 ways of observability</h3>
						<hr class="star-primary">
						<img src="img/3ways-detailed.png" style="border:none;box-shadow:none;">
						<div><a style="font-size:50%" href="https://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html">https://peter.bourgon.org/blog/2017/02/21/metrics-tracing-and-logging.html</a></div>
					</section>
					<section>
						<h3>The JHipster Console</h3>
						<hr class="star-primary">
						<div style="font-size:80%">
							<a href="http://www.jhipster.tech/monitoring/">www.jhipster.tech/monitoring/</a>
							<ul>
								<li class="fragment">Setup ELK (Elasticsearch, Logstash, Kibana) + Zipkin in docker</li>
								<li class="fragment">Enable reporting from any JHipster apps with a few properties</li>
								<li class="fragment">Logs + metrics forwarded with <em>logback-logstash-encoder</em></li>
								<li class="fragment">Traces are forwarded to Zipkin using <em>Spring Cloud Sleuth</em></li>
								<li class="fragment">All data is stored in Elasticseach for a certain number of days (Curator)</li>
							</ul>
						</div>
					</section>
				</section>
				<section>
					<section>
						<h2>JHipster Console demo</h2>
						<span style="color:red;font-size:300%"><i class="fa fa-magic"></i></span>
						<h4 style="font-size:70%">Navigating around Kibana</h4>
						<h4 style="font-size:70%">Creating custom visualizations and dashboards</h4>
						<h4 style="font-size:70%">Graphing metrics, manipulating timeseries</h4>
						<h4 style="font-size:70%">Following call traces accross services (Kibana + Zipkin)</h4>
					</section>
				<section>
					<h2>Questions ?</h2>
<br>
					<p><a href="http://twitter.com/pibesson"><i class="fa fa-twitter"></i>
@pibesson</a></p>
					<p><a href="https://github.com/PierreBesson"><i class="fa fa-github"></i> PierreBesson</a></p>
					<p><a href="mailto:pbesson@ippon.fr"><i class="fa fa-envelope"></i> pbesson@ippon.fr</a></p>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				controls: false,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
